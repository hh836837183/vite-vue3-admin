var e=Object.defineProperty,t=Object.defineProperties,l=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(t,l,n)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[l]=n,r=(e,t)=>{for(var l in t||(t={}))a.call(t,l)&&s(e,l,t[l]);if(n)for(var l of n(t))o.call(t,l)&&s(e,l,t[l]);return e},i=(e,n)=>t(e,l(n));import{y as c,bu as d,bH as u,F as p,d as m,r as b,l as y,o as f,at as x,a as v,Q as h,ac as j,aF as k,aU as w,aR as O,aG as I,O as g,x as C,b as _,c as E,z as L,bt as P,ad as T,h as S}from"./vendor.75aebe02.js";/* empty css               */import{D as $}from"./dynamic-table.60ab9d56.js";import{a as M}from"./hero.994d9d0c.js";import{r as D,I as F,z as q}from"./index.cbbca19b.js";import{I as z,a as A,j as N}from"./index.7a463e84.js";import{u as H}from"./useFormModal.48bf546c.js";/* empty css               */const R=[{title:"头像",align:"center",width:100,hideInSearch:!0,dataIndex:"avatar",bodyCell:({record:e})=>c(z,{src:e.avatar,preview:{src:e.posters},key:e.avatar},null)},{title:"英雄名称",align:"center",dataIndex:"title"},{title:"英雄称号",align:"center",dataIndex:"name"},{title:"定位",align:"center",dataIndex:"roles",bodyCell:({record:e})=>{var t;return c(p,null,[null==(t=e.roles)?void 0:t.map((e=>{return c(d,{color:"blue",key:e},"function"==typeof(t=e)||"[object Object]"===Object.prototype.toString.call(t)&&!u(t)?e:{default:()=>[e]});var t}))])}},{title:"操作",align:"center",width:120,dataIndex:"$action",actions:({record:e})=>[{label:"查看详情",onClick:()=>D.push({name:"demos-table-lol-info",params:{id:e.heroId}})}]}];const W={width:{type:Number,default:156},customEvent:{type:Object,default:null},styles:{type:Object},showIcon:{type:Boolean,default:!0},axis:{type:Object,default:()=>({x:0,y:0})},items:{type:Array,default:()=>[]}},B=e=>{const{item:t}=e;return c("span",{style:"display: inline-block; width: 100%; ",class:"px-4",onClick:e.handler.bind(null,t)},[e.showIcon&&t.icon&&c(F,{class:"mr-2",type:t.icon},null),c("span",null,[t.label])])};var G=m({name:"ContextMenu",props:W,setup(e){const t=b(null),l=b(!1),n=y((()=>{const{axis:t,items:l,styles:n,width:a}=e,{x:o,y:s}=t||{x:0,y:0},c=40*(l||[]).length,d=a,u=document.body,p=u.clientWidth<o+d?o-d:o,m=u.clientHeight<s+c?s-c:s;return i(r({},n),{position:"absolute",width:`${a}px`,left:`${p+1}px`,top:`${m+1}px`})}));function a(e,t){const{handler:n,disabled:a}=e;a||(l.value=!1,null==t||t.stopPropagation(),null==t||t.preventDefault(),null==n||n())}function o(t){return t.map((t=>{const{disabled:n,label:s,children:r,divider:i=!1}=t,d={item:t,handler:a,showIcon:e.showIcon};return r&&0!==r.length?h(l)?c(j.SubMenu,{key:s,disabled:n,popupClassName:"context-menu__popup"},{title:()=>c(B,d,null),default:()=>o(r)}):null:c(p,null,[c(j.Item,{disabled:n,class:"context-menu__item",key:s},{default:()=>[c(B,d,null)]}),i?c(k,{key:`d-${s}`},null):null])}))}return f((()=>{x((()=>l.value=!0))})),v((()=>{const e=h(t);e&&document.body.removeChild(e)})),()=>{let a;if(!h(l))return null;const{items:s}=e;return c("div",{class:"context-menu"},[c(j,{inlineIndent:12,mode:"vertical",ref:t,style:h(n)},(r=a=o(s),"function"==typeof r||"[object Object]"===Object.prototype.toString.call(r)&&!u(r)?a:{default:()=>[a]}))]);var r}}});const K={domList:[],resolve:()=>{}},Q=function(e){const{event:t}=e||{};if(t&&(null==t||t.preventDefault()),q)return new Promise((l=>{const n=document.body,a=document.createElement("div"),o={};e.styles&&(o.styles=e.styles),e.items&&(o.items=e.items),e.event&&(o.customEvent=t,o.axis={x:t.clientX,y:t.clientY});const s=c(G,o);w(s,a);const r=function(){K.resolve("")};K.domList.push(a);const i=function(){K.domList.forEach((e=>{try{e&&n.removeChild(e)}catch(t){}})),n.removeEventListener("click",r),n.removeEventListener("scroll",r)};K.resolve=function(e){i(),l(e)},i(),n.appendChild(a),n.addEventListener("click",r),n.addEventListener("scroll",r)}))},U=function(){K&&(K.resolve(""),K.domList=[])};const V=e=>[{field:"filename",component:"Input",label:e("component.excel.fileName"),rules:[{required:!0}]},{field:"bookType",component:"Select",label:e("component.excel.fileType"),defaultValue:"xlsx",rules:[{required:!0}],componentProps:{options:[{label:"xlsx",value:"xlsx",key:"xlsx"},{label:"html",value:"html",key:"html"},{label:"csv",value:"csv",key:"csv"},{label:"txt",value:"txt",key:"txt"}]}}],X=S(" 英雄联盟 -- 根据数组格式的数据进行导出 "),Y=S("表格自带导出"),J=S(" 数组格式导出 "),Z=S(" 自定义导出格式 "),ee=m(i(r({},{name:"DemosTablesLolTable"}),{setup(e){const t=g(),[l]=function(e=!0){return O()&&e&&v((()=>{U()})),[Q,U]}(),n=(()=>{const{t:e}=I(),[t]=H();return{openModal:({onOk:l})=>{t({modalProps:{title:e("component.excel.exportModalTitle"),onFinish:async e=>{const{filename:t,bookType:n}=e;l({filename:`${t.split(".").shift()}.${n}`,bookType:n})}},formSchema:{labelWidth:100,layout:"vertical",schemas:V(e)}})}}})();let a=[];const o=()=>{const e=R.filter((e=>"$action"!==e.dataIndex)),t=e.map((e=>e.dataIndex));A({data:a.map((e=>t.reduce(((t,l)=>(t[l]=Array.isArray(e[l])?e[l].toString():e[l],t)),{}))).map((e=>Object.values(e))),header:e.map((e=>e.title)),filename:"二维数组方式导出excel.xlsx"})},s=()=>{n.openModal({onOk:({filename:e,bookType:t})=>{N({data:a,filename:e,write2excelOpts:{bookType:t}})}})},r=async e=>{const{data:t}=await M(e);return a=t.list,t},i=e=>({onContextmenu:n=>{l({event:n,items:[{label:"查看",handler:()=>{t.push({name:"demos-table-lol-info",params:{id:e.heroId}})}},{label:"编辑",handler:()=>{}}]})}});return(e,t)=>{const l=C("a-button");return _(),E("div",null,[c(h(P),{message:"游戏介绍",type:"info","show-icon":""},{description:L((()=>[X])),_:1}),c(h(T),{title:"英雄列表mock数据",style:{"margin-top":"20px"}},{default:L((()=>[c(h($),{size:"small",bordered:"","data-request":r,columns:h(R),rowKey:"heroid","export-file-name":"表格自带导出",customRow:i},{"export-button":L((()=>[c(l,{type:"primary"},{default:L((()=>[Y])),_:1})])),toolbar:L((()=>[c(l,{type:"primary",onClick:o},{default:L((()=>[J])),_:1}),c(l,{type:"primary",onClick:s},{default:L((()=>[Z])),_:1})])),_:1},8,["columns"])])),_:1})])}}}));export{ee as default};

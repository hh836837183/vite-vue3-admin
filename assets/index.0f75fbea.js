var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,d=(e,a)=>{for(var l in a||(a={}))s.call(a,l)&&o(e,l,a[l]);if(t)for(var l of t(a))r.call(a,l)&&o(e,l,a[l]);return e},u=(e,t)=>a(e,l(t));import{d as n,bW as i,l as c,b as f,A as b,aM as m,aN as v,Q as p,bX as _,k as y,j as k,o as I,bV as w,c as C,y as h,z as j,br as z,h as L,t as O,bu as g,ad as M,F as P,f as V,e as N}from"./vendor.75aebe02.js";/* empty css              */import{y as S,M as $,_ as x,N as F}from"./index.cbbca19b.js";const A=n({props:u(d({},i()),{strokeColor:{type:[String,Object,Function]}}),setup(e){const a=e,l=c((()=>"function"==typeof a.strokeColor?u(d({},a),{strokeColor:a.strokeColor(a.percent)}):u(d({},a),{strokeColor:a.strokeColor})));return(e,a)=>(f(),b(p(_),m(v(p(l))),null,16))}});const D={class:"sys-server-stat-container"},E={class:"disk-info"},G={class:"disk-info--item"},H={class:"disk-info"},Q={class:"disk-info--item"};var U=x(n(u(d({},{name:"SystemMonitorServe"}),{setup(e){let a=-1;const l=y({runtime:{os:"",arch:"",nodeVersion:"",npmVersion:""},disk:{size:0,used:0,available:0},memory:{total:0,available:0},cpu:{manufacturer:"",brand:"",physicalCores:0,model:"",speed:0,rawCurrentLoad:0,rawCurrentLoadIdle:0,coresLoad:[]}}),{runtime:t,disk:s,memory:r,cpu:o}=k(l),d=c((()=>({size:F(s.value.size),used:F(s.value.used),available:F(s.value.available)}))),u=c((()=>({total:F(r.value.total),free:F(r.value.available),used:F(r.value.total-r.value.available)}))),n=c((()=>s.value.size<=0?0:Math.floor(s.value.used/s.value.size*100))),i=c((()=>r.value.total<=0?0:Math.floor((r.value.total-r.value.available)/r.value.total*100))),m=c((()=>`${o.value.manufacturer} ${o.value.brand} @ ${o.value.speed}GHz`)),v=async()=>{const e=await S({url:$.stat,method:"get"});t.value=e.runtime,s.value=e.disk,r.value=e.memory,o.value=e.cpu};v();const _=e=>e<30?"#5cb87a":e<70?"#e6a23c":"#f53f3f",x=(e,a)=>a<=0?0:Math.floor(e/a*100);return I((()=>{a=setInterval(v,1e4)})),w((()=>{clearInterval(a)})),(e,a)=>(f(),C("div",D,[h(p(M),{class:"stat-card",title:"运行环境"},{default:j((()=>[h(p(z),{column:1,"label-style":{width:"50%"}},{default:j((()=>[h(p(z).Item,{label:"操作系统"},{default:j((()=>[L(O(p(t).os),1)])),_:1}),h(p(z).Item,{label:"系统架构"},{default:j((()=>[L(O(p(t).arch),1)])),_:1}),h(p(z).Item,{label:"Node版本"},{default:j((()=>[h(p(g),{color:"processing",size:"small"},{default:j((()=>[L("v"+O(p(t).nodeVersion),1)])),_:1})])),_:1}),h(p(z).Item,{label:"NPM版本"},{default:j((()=>[h(p(g),{color:"processing",size:"small"},{default:j((()=>[L("v"+O(p(t).npmVersion),1)])),_:1})])),_:1})])),_:1})])),_:1}),h(p(M),{class:"stat-card",title:"CPU"},{default:j((()=>[h(p(z),{column:1,"label-style":{width:"50%"},"content-style":{width:"50%"}},{default:j((()=>[h(p(z).Item,{label:"详细"},{default:j((()=>[L(O(p(m)),1)])),_:1}),h(p(z).Item,{label:"负载"},{default:j((()=>[h(A,{percent:x(p(o).rawCurrentLoad,p(o).rawCurrentLoadIdle+p(o).rawCurrentLoad),strokeColor:_},null,8,["percent"])])),_:1}),(f(!0),C(P,null,V(p(o).coresLoad,((e,a)=>(f(),b(p(z).Item,{key:a,label:`核心${a+1} 负载`},{default:j((()=>[h(A,{percent:x(e.rawLoad,e.rawLoad+e.rawLoadIdle),strokeColor:_},null,8,["percent"])])),_:2},1032,["label"])))),128))])),_:1})])),_:1}),h(p(M),{class:"stat-card",title:"磁盘"},{default:j((()=>[N("div",E,[h(p(z),{class:"disk-info--item",column:1},{default:j((()=>[h(p(z).Item,{label:"总空间"},{default:j((()=>[L(O(p(d).size),1)])),_:1}),h(p(z).Item,{label:"已用空间"},{default:j((()=>[L(O(p(d).used),1)])),_:1}),h(p(z).Item,{label:"可用空间"},{default:j((()=>[L(O(p(d).available),1)])),_:1})])),_:1}),N("div",G,[h(A,{type:"dashboard",percent:p(n),width:100,strokeColor:_},null,8,["percent"])])])])),_:1}),h(p(M),{class:"stat-card",title:"内存"},{default:j((()=>[N("div",H,[h(p(z),{class:"disk-info--item",column:1},{default:j((()=>[h(p(z).Item,{label:"总内存"},{default:j((()=>[L(O(p(u).total),1)])),_:1}),h(p(z).Item,{label:"已用内存"},{default:j((()=>[L(O(p(u).used),1)])),_:1}),h(p(z).Item,{label:"可用内存"},{default:j((()=>[L(O(p(u).free),1)])),_:1})])),_:1}),N("div",Q,[h(A,{type:"dashboard",percent:p(i),width:100,strokeColor:_},null,8,["percent"])])])])),_:1})]))}})),[["__scopeId","data-v-ed595d20"]]);export{U as default};
